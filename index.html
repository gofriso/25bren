<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarjeta de Bren - Especial</title>
    <style>
        :root {
            --ancho-centro: 450px; 
            --ancho-lateral: 225px; 
            --alto: 600px;
            --escala: 1.3; 
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url('img/fondo.png');
            background-size: cover;
            background-position: center;
            overflow: hidden;
            perspective: 2500px;
            cursor: url('img/cursor-bren.png') 16 16, auto;
            -webkit-font-smoothing: antialiased;
        }

        #contenedor-tarjeta {
            position: relative;
            width: var(--ancho-centro);
            height: var(--alto);
            transform: scale(var(--escala)) translateZ(0);
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        #contenedor-tarjeta:hover {
            transform: scale(calc(var(--escala) + 0.03)) translateZ(0);
        }

        /* IMAGEN CENTRAL */
        .foto-centro {
            position: absolute;
            width: 100.2%;
            height: 100%;
            left: -0.1%;
            top: 0;
            background-image: url('img/enmedioabierta.png');
            background-size: 100% 100%;
            z-index: 1;
            box-shadow: 0 15px 45px rgba(0,0,0,0.4);
            backface-visibility: hidden;
        }

        /* PUERTAS */
        .puerta-wrapper {
            position: absolute;
            width: var(--ancho-lateral);
            height: 100%;
            top: 0;
            z-index: 5;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }

        .izquierda { left: 0; transform-origin: left center; }
        .derecha { right: 0; transform-origin: right center; }

        .cara {
            position: absolute;
            width: 100.8%; 
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            background-size: 100% 100%;
            outline: 1px solid transparent; 
        }

        .frente-izq { background-image: url('img/portadaizq.png'); left: 0; }
        .frente-der { background-image: url('img/portadader.png'); right: 0; }
        
        .atras { transform: rotateY(180deg); }
        .atras-izq { background-image: url('img/izquierdaabierta.png'); }
        .atras-der { background-image: url('img/derechaabierta.png'); }

        .abierto .izquierda { transform: rotateY(-180deg); }
        .abierto .derecha { transform: rotateY(180deg); }

    </style>
</head>
<body>

    <audio id="musica-bren" loop>
        <source src="soldierpoetking.mp3" type="audio/mpeg">
    </audio>

    <div id="contenedor-tarjeta" onclick="abrirYSonidito()">
        <div class="foto-centro"></div>

        <div class="puerta-wrapper izquierda">
            <div class="cara frente-izq"></div>
            <div class="cara atras atras-izq"></div>
        </div>

        <div class="puerta-wrapper derecha">
            <div class="cara frente-der"></div>
            <div class="cara atras atras-der"></div>
        </div>
    </div>

    <script>
        const tarjeta = document.getElementById('contenedor-tarjeta');
        const musica = document.getElementById('musica-bren');
        let haSonado = false;

        function abrirYSonidito() {
            // Alternar clase para abrir/cerrar
            tarjeta.classList.toggle('abierto');
            
            // Si es la primera vez que se abre, play a la mÃºsica
            if (!haSonado) {
                musica.play().catch(error => {
                    console.log("El navegador requiere clic manual primero");
                });
                haSonado = true;
            }
        }
    </script>

</body>
</html>